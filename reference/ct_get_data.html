<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Get trade data from the UN Comtrade API — ct_get_data • comtradr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Get trade data from the UN Comtrade API — ct_get_data"><meta property="og:description" content="This function queries the UN Comtrade API to retrieve
international trade data.
It allows for detailed specification of the query,
including the type of data (goods or services),
frequency (annual or monthly), commodity classification,
flow direction, and more.
By providing everything for certain parameters,
you can query all possible values.
The function is opinionated in that it already verifies certain parameters
for you and is more than a pure wrapper around the API."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">comtradr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/comtradr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/bulk_files.html">Querying bulk files from the API</a>
    </li>
    <li>
      <a href="../articles/caching.html">Caching requests from the UN Comtrade API</a>
    </li>
    <li>
      <a href="../articles/large_data.html">Querying large amounts of data</a>
    </li>
    <li>
      <a href="../articles/transition.html">Transition from old comtradr</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ropensci/comtradr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get trade data from the UN Comtrade API</h1>
    <small class="dont-index">Source: <a href="https://github.com/ropensci/comtradr/blob/main/R/ct_get_data.R" class="external-link"><code>R/ct_get_data.R</code></a></small>
    <div class="hidden name"><code>ct_get_data.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function queries the UN Comtrade API to retrieve
international trade data.
It allows for detailed specification of the query,
including the type of data (goods or services),
frequency (annual or monthly), commodity classification,
flow direction, and more.
By providing <code>everything</code> for certain parameters,
you can query all possible values.
The function is opinionated in that it already verifies certain parameters
for you and is more than a pure wrapper around the API.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ct_get_data</span><span class="op">(</span></span>
<span>  type <span class="op">=</span> <span class="st">"goods"</span>,</span>
<span>  frequency <span class="op">=</span> <span class="st">"A"</span>,</span>
<span>  commodity_classification <span class="op">=</span> <span class="st">"HS"</span>,</span>
<span>  commodity_code <span class="op">=</span> <span class="st">"TOTAL"</span>,</span>
<span>  flow_direction <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Import"</span>, <span class="st">"Export"</span>, <span class="st">"Re-export"</span>, <span class="st">"Re-import"</span><span class="op">)</span>,</span>
<span>  reporter <span class="op">=</span> <span class="st">"all_countries"</span>,</span>
<span>  partner <span class="op">=</span> <span class="st">"World"</span>,</span>
<span>  start_date <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  end_date <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  process <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  tidy_cols <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  primary_token <span class="op">=</span> <span class="fu"><a href="get_primary_comtrade_key.html">get_primary_comtrade_key</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  mode_of_transport <span class="op">=</span> <span class="st">"TOTAL modes of transport"</span>,</span>
<span>  partner_2 <span class="op">=</span> <span class="st">"World"</span>,</span>
<span>  customs_code <span class="op">=</span> <span class="st">"C00"</span>,</span>
<span>  update <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  requests_per_second <span class="op">=</span> <span class="fl">10</span><span class="op">/</span><span class="fl">60</span>,</span>
<span>  extra_params <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cache <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>The type of returned trade data.
Possible values: 'goods' for trade in goods,
'services' for trade in services. Default: 'goods'.</p></dd>


<dt id="arg-frequency">frequency<a class="anchor" aria-label="anchor" href="#arg-frequency"></a></dt>
<dd><p>The frequency of returned trade data.
Possible values: 'A' for annual data, 'M' for monthly data. Default: 'A'.</p></dd>


<dt id="arg-commodity-classification">commodity_classification<a class="anchor" aria-label="anchor" href="#arg-commodity-classification"></a></dt>
<dd><p>The trade classification scheme.
Possible values for goods: <code>c('HS','S1','S2','S3','S4','SS','B4','B5')</code>;
for services: <code>c('EB02','EB10','EB10S','EB')</code>. Default: 'HS'.</p></dd>


<dt id="arg-commodity-code">commodity_code<a class="anchor" aria-label="anchor" href="#arg-commodity-code"></a></dt>
<dd><p>The commodity code(s) or <code>everything</code> for all possible
codes. See <code>comtradr::ct_get_ref_table('HS')</code> for possible values.
Default: 'TOTAL' (sum of all commodities).</p></dd>


<dt id="arg-flow-direction">flow_direction<a class="anchor" aria-label="anchor" href="#arg-flow-direction"></a></dt>
<dd><p>The direction of trade flows or <code>everything</code>.
Possible values can be found in <code>ct_get_ref_table('flow_direction')</code>. These
are implemented case-insensitive, 'import' and 'Import' are equivalent.
Default: c('import','export','re-export','re-import').</p></dd>


<dt id="arg-reporter">reporter<a class="anchor" aria-label="anchor" href="#arg-reporter"></a></dt>
<dd><p>Reporter ISO3 code(s), <code>everything</code> or <code>all_countries</code>.
See <code><a href="country_codes.html">comtradr::country_codes</a></code> or <code>comtradr::ct_get_ref_table('reporter')</code>
for possible values. <code>all_countries</code> returns all countries without aggregates
<code>everything</code> returns all possible parameters. Default: 'all_countries'.</p></dd>


<dt id="arg-partner">partner<a class="anchor" aria-label="anchor" href="#arg-partner"></a></dt>
<dd><p>Partner ISO3 code(s), <code>everything</code> or <code>all_countries</code>.
See <code><a href="country_codes.html">comtradr::country_codes</a></code> for possible values.
<code>all_countries</code> returns all countries without aggregates
<code>everything</code> returns all possible parameters, incl. aggregates like World.
Default: 'World' (all partners as an aggregate).</p></dd>


<dt id="arg-start-date">start_date<a class="anchor" aria-label="anchor" href="#arg-start-date"></a></dt>
<dd><p>The start date of the query.
Format: <code>yyyy</code> for yearly, <code>yyyy-mm</code> for monthly.</p></dd>


<dt id="arg-end-date">end_date<a class="anchor" aria-label="anchor" href="#arg-end-date"></a></dt>
<dd><p>The end date of the query.
Format: <code>yyyy</code> for yearly, <code>yyyy-mm</code> for monthly.
Max: 12 years after start date for annual data, one year for monthly data.</p></dd>


<dt id="arg-process">process<a class="anchor" aria-label="anchor" href="#arg-process"></a></dt>
<dd><p>If TRUE, returns a data.frame with results.
If FALSE, returns the raw httr2 request. Default: TRUE.</p></dd>


<dt id="arg-tidy-cols">tidy_cols<a class="anchor" aria-label="anchor" href="#arg-tidy-cols"></a></dt>
<dd><p>If TRUE, returns tidy column names.
If FALSE, returns raw column names. Default: TRUE.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>If TRUE, sends status updates to the console.
If FALSE, runs functions quietly. Default: FALSE.</p></dd>


<dt id="arg-primary-token">primary_token<a class="anchor" aria-label="anchor" href="#arg-primary-token"></a></dt>
<dd><p>Your primary UN Comtrade API token.
Default: stored token from <code><a href="set_primary_comtrade_key.html">comtradr::set_primary_comtrade_key</a></code>.</p></dd>


<dt id="arg-mode-of-transport">mode_of_transport<a class="anchor" aria-label="anchor" href="#arg-mode-of-transport"></a></dt>
<dd><p>Text code of mode of transport or <code>everything</code> for
all possible parameters.
See <code>ct_get_ref_table(dataset_id = 'mode_of_transport')</code> for possible values.
Default: 'TOTAL modes of transport' (TOTAL).</p></dd>


<dt id="arg-partner-">partner_2<a class="anchor" aria-label="anchor" href="#arg-partner-"></a></dt>
<dd><p>Partner 2 ISO3 code(s), <code>everything</code> or <code>all_countries</code>.
See <code><a href="country_codes.html">comtradr::country_codes</a></code> for possible values.
<code>all_countries</code> returns all countries without aggregates
<code>everything</code> returns all possible parameters, incl. aggregates like World.
Default: 'World' (all partners as an aggregate).</p></dd>


<dt id="arg-customs-code">customs_code<a class="anchor" aria-label="anchor" href="#arg-customs-code"></a></dt>
<dd><p>Customs Code ID or <code>everything</code> for all possible
parameters.
See <code>ct_get_ref_table(dataset_id = 'customs_code')</code> for possible values.
Default: 'C00' (TOTAL).</p></dd>


<dt id="arg-update">update<a class="anchor" aria-label="anchor" href="#arg-update"></a></dt>
<dd><p>If TRUE, downloads possibly updated reference tables
from the UN. Default: FALSE.</p></dd>


<dt id="arg-requests-per-second">requests_per_second<a class="anchor" aria-label="anchor" href="#arg-requests-per-second"></a></dt>
<dd><p>Rate of requests per second executed,
usually specified as a fraction, e.g. 10/60 for 10 requests per minute,
see <code>req_throttle()</code> for details.</p></dd>


<dt id="arg-extra-params">extra_params<a class="anchor" aria-label="anchor" href="#arg-extra-params"></a></dt>
<dd><p>Additional parameters to the API, passed as query
parameters without checking. Please provide a named list to this parameter.
Default: NULL.</p></dd>


<dt id="arg-cache">cache<a class="anchor" aria-label="anchor" href="#arg-cache"></a></dt>
<dd><p>A logical value to determine, whether requests should be cached
or not. If set to True, <code>tools::R_user_dir(which = 'cache')</code> is used
to determine the location of the cache. Use the .Renviron file to set the
R_USER_CACHE_DIR in order to change this location. Default: False.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A data.frame with trade data or,
if <code>process = F</code>, a httr2 response object.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The UN Comtrade database provides a repository of official international
trade statistics and relevant analytical tables.
It contains annual trade statistics starting from 1988
and monthly trade statistics since 2000 for goods data</p>
<p>Parameters that accept <code>everything</code> will query all possible values.
For example, setting <code>commodity_code = 'everything'</code>
will retrieve data for all commodity codes.
This can be useful for broad queries but may result in large datasets.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># interactive()</span></span></span>
<span class="r-in"><span><span class="co"># Query goods data for China's trade with Argentina and Germany in 2019</span></span></span>
<span class="r-in"><span><span class="fu">ct_get_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  type <span class="op">=</span> <span class="st">"goods"</span>,</span></span>
<span class="r-in"><span>  commodity_classification <span class="op">=</span> <span class="st">"HS"</span>,</span></span>
<span class="r-in"><span>  commodity_code <span class="op">=</span> <span class="st">"TOTAL"</span>,</span></span>
<span class="r-in"><span>  reporter <span class="op">=</span> <span class="st">"CHN"</span>,</span></span>
<span class="r-in"><span>  partner <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ARG"</span>, <span class="st">"DEU"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  start_date <span class="op">=</span> <span class="st">"2019"</span>,</span></span>
<span class="r-in"><span>  end_date <span class="op">=</span> <span class="st">"2019"</span>,</span></span>
<span class="r-in"><span>  flow_direction <span class="op">=</span> <span class="st">"Import"</span>,</span></span>
<span class="r-in"><span>  partner_2 <span class="op">=</span> <span class="st">"World"</span>,</span></span>
<span class="r-in"><span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Query all commodity codes for China's imports from Germany in 2019</span></span></span>
<span class="r-in"><span><span class="fu">ct_get_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  commodity_code <span class="op">=</span> <span class="st">"everything"</span>,</span></span>
<span class="r-in"><span>  reporter <span class="op">=</span> <span class="st">"CHN"</span>,</span></span>
<span class="r-in"><span>  partner <span class="op">=</span> <span class="st">"DEU"</span>,</span></span>
<span class="r-in"><span>  start_date <span class="op">=</span> <span class="st">"2019"</span>,</span></span>
<span class="r-in"><span>  end_date <span class="op">=</span> <span class="st">"2019"</span>,</span></span>
<span class="r-in"><span>  flow_direction <span class="op">=</span> <span class="st">"Import"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Query all commodity codes for China's imports from Germany</span></span></span>
<span class="r-in"><span><span class="co"># from January to June of 2019</span></span></span>
<span class="r-in"><span><span class="fu">ct_get_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  commodity_code <span class="op">=</span> <span class="st">"everything"</span>,</span></span>
<span class="r-in"><span>  reporter <span class="op">=</span> <span class="st">"CHN"</span>,</span></span>
<span class="r-in"><span>  partner <span class="op">=</span> <span class="st">"DEU"</span>,</span></span>
<span class="r-in"><span>  start_date <span class="op">=</span> <span class="st">"2019"</span>,</span></span>
<span class="r-in"><span>  end_date <span class="op">=</span> <span class="st">"2019"</span>,</span></span>
<span class="r-in"><span>  flow_direction <span class="op">=</span> <span class="st">"import"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Paul Bochtler, Harriet Goers, Chris Muir.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer></div>






  </body></html>

